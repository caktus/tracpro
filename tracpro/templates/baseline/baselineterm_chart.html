<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script>
$(function () {
    {% if baselineterm %}
    $('#container').highcharts({
        title: {
            text: '{{ baselineterm.name|escapejs }}'
        },
        subtitle: {
            text: 'Baseline: {{ baselineterm.baseline_question|escapejs }}, Follow Up: {{ baselineterm.follow_up_question|escapejs }}'
        },
        xAxis: {
            categories: [
                        {% for date in date_list %}
                            '{{ date }}'{% if not forloop.last %},{% endif %}
                        {% endfor %}
                        ]
        },
        yAxis: {
            title: {
                text: '{{ baselineterm.y_axis_title|escapejs }}'
            }
        },
        series: [
        // Baseline Data
        {% for key, values in baseline_dict.items %}
            {
                type: 'area',
                name: '{{ key|escapejs }} Baseline {% if goal_selected %}Goal{% endif %}',
                {% for subkey, value_list in values.items %}
                    {% if goal_selected %}
                        data: {{ goal_selected }}
                    {% else %}
                        data: {{ value_list }}
                    {% endif %}
                {% endfor %}
            },
        {% endfor %}
        // Follow Up Data
        {% for key, values in answers_dict.items %}
            {
                type: 'area',
                name: '{{ key|escapejs }} Follow Up',
                {% for subkey, value_list in values.items %}
                    data: {{ value_list }}
                {% endfor %}
            },
        {% endfor %}
        ]
    });
    {% else %}
        $('#container').html('<div class="alert alert-info">No baseline data exists.</div>');
    {% endif %}
});
</script>